<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catalog - OTT Marketplace</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #6c5ce7;
            --secondary-color: #a29bfe;
            --accent-color: #fd79a8;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f6fa;
            color: #333;
        }
        
        .navbar {
            background-color: var(--primary-color);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .navbar-brand {
            font-weight: 700;
            color: white !important;
        }
        
        .nav-link {
            color: rgba(255, 255, 255, 0.85) !important;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .nav-link:hover {
            color: white !important;
            transform: translateY(-2px);
        }
        
        .catalog-header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 40px 0;
            border-radius: 0 0 20px 20px;
            margin-bottom: 30px;
        }
        
        .catalog-title {
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .filter-container {
            background-color: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
        }
        
        .filter-title {
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .filter-btn {
            border-radius: 50px;
            padding: 8px 15px;
            margin-right: 10px;
            margin-bottom: 10px;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .filter-btn.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        .card {
            border: none;
            border-radius: 15px;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 25px;
        }
        
        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }
        
        .card-title {
            font-weight: 700;
            font-size: 1.4rem;
        }
        
        .card-img-top {
            height: 180px;
            object-fit: cover;
        }
        
        .category-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background-color: var(--primary-color);
            color: white;
            padding: 5px 15px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 0.8rem;
        }
        
        .price {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
        }
        
        .duration {
            font-size: 0.9rem;
            color: #6c757d;
        }
        
        .btn-primary {
            background-color: var(--accent-color);
            border-color: var(--accent-color);
            font-weight: 600;
            padding: 10px 20px;
            border-radius: 50px;
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            background-color: #ff5e94;
            border-color: #ff5e94;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(253, 121, 168, 0.4);
        }
        
        footer {
            background-color: var(--dark-color);
            color: white;
            padding: 40px 0;
            margin-top: 50px;
        }
        
        .footer-links a {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            transition: all 0.3s ease;
        }
        
        .footer-links a:hover {
            color: white;
            text-decoration: underline;
        }
        
        .social-icons a {
            color: white;
            font-size: 1.5rem;
            margin-right: 15px;
            transition: all 0.3s ease;
        }
        
        .social-icons a:hover {
            color: var(--accent-color);
            transform: translateY(-3px);
        }
        
        /* Cart Modal */
        .modal-content {
            border-radius: 15px;
            border: none;
        }
        
        .modal-header {
            border-bottom: none;
            padding: 20px 30px;
        }
        
        .modal-title {
            font-weight: 700;
            color: var(--primary-color);
        }
        
        .modal-body {
            padding: 20px 30px;
        }
        
        .modal-footer {
            border-top: none;
            padding: 20px 30px;
        }
        
        .cart-item {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .cart-item-title {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .cart-item-price {
            font-weight: 700;
            color: var(--primary-color);
        }
        
        .cart-item-remove {
            color: #dc3545;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .cart-item-remove:hover {
            transform: scale(1.2);
        }
        
        .cart-total {
            font-weight: 700;
            font-size: 1.2rem;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #dee2e6;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .catalog-header {
                padding: 30px 0;
            }
            
            .card-img-top {
                height: 140px;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark sticky-top">
        <div class="container">
            <a class="navbar-brand" href="index.html">OTT Marketplace</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="catalog.html">Catalog</a>
                    </li>
                    <li class="nav-item" id="dashboard-nav" style="display: none;">
                        <a class="nav-link" href="dashboard.html">My Subscriptions</a>
                    </li>
                    <li class="nav-item" id="login-nav">
                        <a class="nav-link" href="login.html">Login</a>
                    </li>
                    <li class="nav-item" id="signup-nav">
                        <a class="nav-link" href="signup.html">Sign Up</a>
                    </li>
                    <li class="nav-item" id="logout-nav" style="display: none;">
                        <a class="nav-link" href="#" id="logout-btn">Logout</a>
                    </li>
                </ul>
                <button class="btn btn-light ms-3" id="cart-btn" data-bs-toggle="modal" data-bs-target="#cartModal">
                    <i class="fas fa-shopping-cart"></i> <span id="cart-count">0</span>
                </button>
            </div>
        </div>
    </nav>

    <!-- Catalog Header -->
    <section class="catalog-header">
        <div class="container">
            <h1 class="catalog-title">OTT Subscription Catalog</h1>
            <p>Browse our collection of premium streaming subscriptions at the best prices</p>
        </div>
    </section>

    <!-- Catalog Content -->
    <div class="container">
        <!-- Filters -->
        <div class="filter-container">
            <h5 class="filter-title">Filter by Platform</h5>
            <div class="d-flex flex-wrap">
                <button class="btn btn-outline-primary filter-btn active" data-category="all">All</button>
                <button class="btn btn-outline-primary filter-btn" data-category="Amazon Prime">Amazon Prime</button>
                <button class="btn btn-outline-primary filter-btn" data-category="Netflix">Netflix</button>
                <button class="btn btn-outline-primary filter-btn" data-category="Disney+ Hotstar">Disney+ Hotstar</button>
                <button class="btn btn-outline-primary filter-btn" data-category="SonyLIV">SonyLIV</button>
                <button class="btn btn-outline-primary filter-btn" data-category="ZEE5">ZEE5</button>
            </div>
        </div>

        <!-- Products Grid -->
        <div class="row" id="products-container">
            <!-- Products will be loaded dynamically -->
            <div class="col-12 text-center py-5">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <p class="mt-3">Loading products...</p>
            </div>
        </div>
    </div>

    <!-- Cart Modal -->
    <div class="modal fade" id="cartModal" tabindex="-1" aria-labelledby="cartModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="cartModalLabel">Your Cart</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="cart-items-container">
                        <!-- Cart items will be loaded dynamically -->
                        <p id="empty-cart-message">Your cart is empty.</p>
                    </div>
                    <div class="cart-total" id="cart-total-container" style="display: none;">
                        <div class="d-flex justify-content-between">
                            <span>Total:</span>
                            <span id="cart-total-amount">₹0</span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Continue Shopping</button>
                    <button type="button" class="btn btn-primary" id="checkout-btn" disabled>Checkout</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Payment Modal -->
    <div class="modal fade" id="paymentModal" tabindex="-1" aria-labelledby="paymentModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="paymentModalLabel">Complete Payment</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-info">
                        <p><strong>UPI Payment Instructions:</strong></p>
                        <p>Please send the payment to the following UPI ID:</p>
                        <div class="d-flex align-items-center justify-content-center my-3">
                            <h4 class="mb-0 text-primary">abcdef@cnrb</h4>
                            <button class="btn btn-sm btn-outline-primary ms-3" id="copy-upi-btn">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                        </div>
                        <p>After completing the payment, please upload the screenshot below.</p>
                    </div>
                    
                    <form id="payment-form" class="mt-4">
                        <div class="mb-3">
                            <label for="payment-screenshot" class="form-label">Payment Screenshot</label>
                            <input type="file" class="form-control" id="payment-screenshot" accept="image/*" required>
                        </div>
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary">Submit Payment</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-4">
                    <h5>OTT Marketplace</h5>
                    <p>Your one-stop destination for all premium OTT subscriptions at the best prices.</p>
                </div>
                <div class="col-md-4 mb-4">
                    <h5>Quick Links</h5>
                    <ul class="list-unstyled footer-links">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="catalog.html">Catalog</a></li>
                        <li><a href="login.html">Login</a></li>
                        <li><a href="signup.html">Sign Up</a></li>
                    </ul>
                </div>
                <div class="col-md-4 mb-4">
                    <h5>Connect With Us</h5>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
            </div>
            <hr class="mt-4 mb-3">
            <div class="text-center">
                <p class="mb-0">&copy; 2025 OTT Marketplace. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Sample product data (in a real app, this would come from the API)
        const sampleProducts = [
            {
                id: 1,
                name: 'Amazon Prime 1 Month',
                description: 'Access to Amazon Prime Video, Prime Music, and free shipping for 1 month',
                price: 179,
                duration_months: 1,
                category: 'Amazon Prime',
                image: 'https://m.media-amazon.com/images/G/01/primevideo/seo/primevideo-seo-logo.png'
            },
            {
                id: 2,
                name: 'Amazon Prime 3 Months',
                description: 'Access to Amazon Prime Video, Prime Music, and free shipping for 3 months',
                price: 459,
                duration_months: 3,
                category: 'Amazon Prime',
                image: 'https://m.media-amazon.com/images/G/01/primevideo/seo/primevideo-seo-logo.png'
            },
            {
                id: 3,
                name: 'Amazon Prime 6 Months',
                description: 'Access to Amazon Prime Video, Prime Music, and free shipping for 6 months',
                price: 849,
                duration_months: 6,
                category: 'Amazon Prime',
                image: 'https://m.media-amazon.com/images/G/01/primevideo/seo/primevideo-seo-logo.png'
            },
            {
                id: 4,
                name: 'Amazon Prime 1 Year',
                description: 'Access to Amazon Prime Video, Prime Music, and free shipping for 1 year',
                price: 1499,
                duration_months: 12,
                category: 'Amazon Prime',
                image: 'https://m.media-amazon.com/images/G/01/primevideo/seo/primevideo-seo-logo.png'
            },
            {
                id: 5,
                name: 'Netflix 1 Month',
                description: 'Access to Netflix Standard plan with HD streaming for 1 month',
                price: 499,
                duration_months: 1,
                category: 'Netflix',
                image: 'https://assets.nflxext.com/ffe/siteui/vlv3/c31c3123-3df7-4359-8b8c-475bd2d9925d/15feb590-3d73-45e9-9e4a-2eb334c83921/IN-en-20231225-popsignuptwoweeks-perspective_alpha_website_large.jpg'
            },
            {
                id: 6,
                name: 'Netflix 3 Months',
                description: 'Access to Netflix Standard plan with HD streaming for 3 months',
                price: 1399,
                duration_months: 3,
                category: 'Netflix',
                image: 'https://assets.nflxext.com/ffe/siteui/vlv3/c31c3123-3df7-4359-8b8c-475bd2d9925d/15feb590-3d73-45e9-9e4a-2eb334c83921/IN-en-20231225-popsignuptwoweeks-perspective_alpha_website_large.jpg'
            },
            {
                id: 7,
                name: 'Netflix 6 Months',
                description: 'Access to Netflix Standard plan with HD streaming for 6 months',
                price: 2699,
                duration_months: 6,
                category: 'Netflix',
                image: 'https://assets.nflxext.com/ffe/siteui/vlv3/c31c3123-3df7-4359-8b8c-475bd2d9925d/15feb590-3d73-45e9-9e4a-2eb334c83921/IN-en-20231225-popsignuptwoweeks-perspective_alpha_website_large.jpg'
            },
            {
                id: 8,
                name: 'Netflix 1 Year',
                description: 'Access to Netflix Standard plan with HD streaming for 1 year',
                price: 4999,
                duration_months: 12,
                category: 'Netflix',
                image: 'https://assets.nflxext.com/ffe/siteui/vlv3/c31c3123-3df7-4359-8b8c-475bd2d9925d/15feb590-3d73-45e9-9e4a-2eb334c83921/IN-en-20231225-popsignuptwoweeks-perspective_alpha_website_large.jpg'
            },
            {
                id: 9,
                name: 'Disney+ Hotstar 1 Month',
                description: 'Access to Disney+ Hotstar Premium with all content for 1 month',
                price: 299,
                duration_months: 1,
                category: 'Disney+ Hotstar',
                image: 'https://img.hotstar.com/image/upload/v1656431456/web-images/logo-d-plus.svg'
            },
            {
                id: 10,
                name: 'Disney+ Hotstar 3 Months',
                description: 'Access to Disney+ Hotstar Premium with all content for 3 months',
                price: 799,
                duration_months: 3,
                category: 'Disney+ Hotstar',
                image: 'https://img.hotstar.com/image/upload/v1656431456/web-images/logo-d-plus.svg'
            },
            {
                id: 11,
                name: 'Disney+ Hotstar 1 Year',
                description: 'Access to Disney+ Hotstar Premium with all content for 1 year',
                price: 1499,
                duration_months: 12,
                category: 'Disney+ Hotstar',
                image: 'https://img.hotstar.com/image/upload/v1656431456/web-images/logo-d-plus.svg'
            },
            {
                id: 12,
                name: 'SonyLIV 1 Month',
                description: 'Access to SonyLIV Premium with all content for 1 month',
                price: 299,
                duration_months: 1,
                category: 'SonyLIV',
                image: 'https://images.slivcdn.com/UI_icons/sonyliv_new_revised_header_logo.png?w=40&q=high&fr=webp'
            },
            {
                id: 13,
                name: 'SonyLIV 6 Months',
                description: 'Access to SonyLIV Premium with all content for 6 months',
                price: 699,
                duration_months: 6,
                category: 'SonyLIV',
                image: 'https://images.slivcdn.com/UI_icons/sonyliv_new_revised_header_logo.png?w=40&q=high&fr=webp'
            },
            {
                id: 14,
                name: 'ZEE5 1 Month',
                description: 'Access to ZEE5 Premium with all content for 1 month',
                price: 199,
                duration_months: 1,
                category: 'ZEE5',
                image: 'https://www.zee5.com/images/ZEE5_logo.svg?ver=2.52.40'
            },
            {
                id: 15,
                name: 'ZEE5 1 Year',
                description: 'Access to ZEE5 Premium with all content for 1 year',
                price: 999,
                duration_months: 12,
                category: 'ZEE5',
                image: 'https://www.zee5.com/images/ZEE5_logo.svg?ver=2.52.40'
            }
        ];

        // Cart functionality
        let cart = [];
        
        function updateCartCount() {
            document.getElementById('cart-count').textContent = cart.length;
        }
        
        function updateCartDisplay() {
            const cartContainer = document.getElementById('cart-items-container');
            const emptyCartMessage = document.getElementById('empty-cart-message');
            const cartTotalContainer = document.getElementById('cart-total-container');
            const checkoutBtn = document.getElementById('checkout-btn');
            
            if (cart.length === 0) {
                cartContainer.innerHTML = '<p id="empty-cart-message">Your cart is empty.</p>';
                cartTotalContainer.style.display = 'none';
                checkoutBtn.disabled = true;
                return;
            }
            
            let cartHTML = '';
            let totalAmount = 0;
            
            cart.forEach((item, index) => {
                cartHTML += `
                    <div class="cart-item">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="cart-item-title">${item.name}</h6>
                                <p class="mb-0">${item.duration_months} month${item.duration_months > 1 ? 's' : ''}</p>
                            </div>
                            <div class="d-flex align-items-center">
                                <span class="cart-item-price me-3">₹${item.price}</span>
                                <i class="fas fa-times cart-item-remove" data-index="${index}"></i>
                            </div>
                        </div>
                    </div>
                `;
                
                totalAmount += item.price;
            });
            
            cartContainer.innerHTML = cartHTML;
            document.getElementById('cart-total-amount').textContent = `₹${totalAmount}`;
            cartTotalContainer.style.display = 'block';
            checkoutBtn.disabled = false;
            
            // Add event listeners to remove buttons
            document.querySelectorAll('.cart-item-remove').forEach(btn => {
                btn.addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    cart.splice(index, 1);
                    updateCartCount();
                    updateCartDisplay();
                });
            });
        }
        
        function addToCart(product) {
            cart.push(product);
            updateCartCount();
            updateCartDisplay();
            
            // Show toast notification
            const toastContainer = document.createElement('div');
            toastContainer.style.position = 'fixed';
            toastContainer.style.bottom = '20px';
            toastContainer.style.right = '20px';
            toastContainer.style.zIndex = '1050';
            
            toastContainer.innerHTML = `
                <div class="toast show" role="alert" aria-live="assertive" aria-atomic="true">
                    <div class="toast-header">
                        <strong class="me-auto">Item Added</strong>
                        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                    </div>
                    <div class="toast-body">
                        ${product.name} has been added to your cart.
                    </div>
                </div>
            `;
            
            document.body.appendChild(toastContainer);
            
            setTimeout(() => {
                toastContainer.remove();
            }, 3000);
        }
        
        // Load products
        function loadProducts(category = 'all') {
            const productsContainer = document.getElementById('products-container');
            
            // Filter products by category if needed
            let filteredProducts = sampleProducts;
            if (category !== 'all') {
                filteredProducts = sampleProducts.filter(product => product.category === category);
            }
            
            // Generate HTML for products
            let productsHTML = '';
            
            filteredProducts.forEach(product => {
                productsHTML += `
                    <div class="col-md-4 col-lg-3 mb-4">
                        <div class="card h-100">
                            <img src="${product.image}" class="card-img-top" alt="${product.name}">
                            <span class="category-badge">${product.category}</span>
                            <div class="card-body d-flex flex-column">
                                <h5 class="card-title">${product.name}</h5>
                                <p class="card-text">${product.description}</p>
                                <div class="mt-auto">
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <span class="price">₹${product.price}</span>
                                        <span class="duration">${product.duration_months} month${product.duration_months > 1 ? 's' : ''}</span>
                                    </div>
                                    <button class="btn btn-primary w-100 add-to-cart-btn" data-product-id="${product.id}">Add to Cart</button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            // Update the container
            productsContainer.innerHTML = productsHTML;
            
            // Add event listeners to "Add to Cart" buttons
            document.querySelectorAll('.add-to-cart-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const productId = parseInt(this.getAttribute('data-product-id'));
                    const product = sampleProducts.find(p => p.id === productId);
                    
                    if (product) {
                        addToCart(product);
                    }
                });
            });
        }
        
        // Filter functionality
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                // Update active state
                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                // Filter products
                const category = this.getAttribute('data-category');
                loadProducts(category);
            });
        });
        
        // Checkout functionality
        document.getElementById('checkout-btn').addEventListener('click', function() {
            const token = localStorage.getItem('token');
            
            if (!token) {
                // Redirect to login if not logged in
                localStorage.setItem('cart', JSON.stringify(cart));
                localStorage.setItem('redirect_after_login', 'catalog.html');
                window.location.href = 'login.html';
                return;
            }
            
            // Show payment modal
            const paymentModal = new bootstrap.Modal(document.getElementById('paymentModal'));
            paymentModal.show();
            
            // Hide cart modal
            const cartModal = bootstrap.Modal.getInstance(document.getElementById('cartModal'));
            cartModal.hide();
        });
        
        // Copy UPI ID
        document.getElementById('copy-upi-btn').addEventListener('click', function() {
            const upiId = 'abcdef@cnrb';
            navigator.clipboard.writeText(upiId).then(() => {
                this.innerHTML = '<i class="fas fa-check"></i> Copied';
                setTimeout(() => {
                    this.innerHTML = '<i class="fas fa-copy"></i> Copy';
                }, 2000);
            });
        });
        
        // Payment form submission
        document.getElementById('payment-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const token = localStorage.getItem('token');
            if (!token) {
                alert('Please login to complete your purchase.');
                return;
            }
            
            const fileInput = document.getElementById('payment-screenshot');
            if (!fileInput.files || fileInput.files.length === 0) {
                alert('Please upload a payment screenshot.');
                return;
            }
            
            // In a real app, we would upload the file and create the order
            // For this demo, we'll simulate a successful order
            
            // Create form data
            const formData = new FormData();
            formData.append('file', fileInput.files[0]);
            
            // Prepare order items
            const orderItems = cart.map(item => ({
                product_id: item.id,
                price: item.price
            }));
            
            // Create order (in a real app)
            // fetch('/api/orders', {
            //     method: 'POST',
            //     headers: {
            //         'Authorization': `Bearer ${token}`
            //     },
            //     body: JSON.stringify({ items: orderItems })
            // })
            // .then(response => response.json())
            // .then(orderData => {
            //     // Upload payment screenshot
            //     return fetch(`/api/orders/${orderData.order.id}/upload-payment`, {
            //         method: 'POST',
            //         headers: {
            //             'Authorization': `Bearer ${token}`
            //         },
            //         body: formData
            //     });
            // })
            // .then(response => response.json())
            // .then(data => {
            //     // Success
            //     alert('Your order has been placed successfully! You will receive your credentials via email once payment is verified.');
            //     cart = [];
            //     updateCartCount();
            //     updateCartDisplay();
            //     
            //     // Hide payment modal
            //     const paymentModal = bootstrap.Modal.getInstance(document.getElementById('paymentModal'));
            //     paymentModal.hide();
            //     
            //     // Redirect to dashboard
            //     window.location.href = 'dashboard.html';
            // })
            // .catch(error => {
            //     console.error('Error:', error);
            //     alert('An error occurred. Please try again later.');
            // });
            
            // For demo purposes, simulate success
            setTimeout(() => {
                alert('Your order has been placed successfully! You will receive your credentials via email once payment is verified.');
                cart = [];
                updateCartCount();
                updateCartDisplay();
                
                // Hide payment modal
                const paymentModal = bootstrap.Modal.getInstance(document.getElementById('paymentModal'));
                paymentModal.hide();
                
                // Redirect to dashboard
                window.location.href = 'dashboard.html';
            }, 1500);
        });
        
        // Check login status
        document.addEventListener('DOMContentLoaded', function() {
            const token = localStorage.getItem('token');
            
            if (token) {
                document.getElementById('login-nav').style.display = 'none';
                document.getElementById('signup-nav').style.display = 'none';
                document.getElementById('dashboard-nav').style.display = 'block';
                document.getElementById('logout-nav').style.display = 'block';
                
                // Check if there's a saved cart
                const savedCart = localStorage.getItem('cart');
                if (savedCart) {
                    cart = JSON.parse(savedCart);
                    localStorage.removeItem('cart');
                    updateCartCount();
                    updateCartDisplay();
                }
            }
            
            // Logout functionality
            document.getElementById('logout-btn').addEventListener('click', function(e) {
                e.preventDefault();
                localStorage.removeItem('token');
                localStorage.removeItem('user');
                window.location.href = 'index.html';
            });
            
            // Load products
            loadProducts();
        });
    </script>
</body>
</html>
