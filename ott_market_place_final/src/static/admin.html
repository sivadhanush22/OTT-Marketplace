<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - OTT Marketplace</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #6c5ce7;
            --secondary-color: #a29bfe;
            --accent-color: #fd79a8;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f6fa;
            color: #333;
        }
        
        .navbar {
            background-color: var(--primary-color);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .navbar-brand {
            font-weight: 700;
            color: white !important;
        }
        
        .nav-link {
            color: rgba(255, 255, 255, 0.85) !important;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .nav-link:hover {
            color: white !important;
            transform: translateY(-2px);
        }
        
        .admin-header {
            background-color: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
        }
        
        .admin-title {
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 0;
        }
        
        .card {
            border: none;
            border-radius: 15px;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 25px;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }
        
        .card-title {
            font-weight: 700;
            font-size: 1.4rem;
        }
        
        .btn-primary {
            background-color: var(--accent-color);
            border-color: var(--accent-color);
            font-weight: 600;
            padding: 10px 20px;
            border-radius: 50px;
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            background-color: #ff5e94;
            border-color: #ff5e94;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(253, 121, 168, 0.4);
        }
        
        .btn-outline-primary {
            color: var(--accent-color);
            border-color: var(--accent-color);
            font-weight: 600;
            padding: 10px 20px;
            border-radius: 50px;
            transition: all 0.3s ease;
        }
        
        .btn-outline-primary:hover {
            background-color: var(--accent-color);
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(253, 121, 168, 0.4);
        }
        
        .nav-pills .nav-link {
            color: var(--dark-color) !important;
            border-radius: 50px;
            padding: 10px 20px;
            margin-right: 10px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }
        
        .nav-pills .nav-link.active {
            background-color: var(--primary-color);
            color: white !important;
        }
        
        .table {
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .table th {
            background-color: var(--primary-color);
            color: white;
            font-weight: 600;
            border: none;
        }
        
        .table td {
            vertical-align: middle;
        }
        
        .action-btn {
            color: var(--primary-color);
            cursor: pointer;
            transition: all 0.3s ease;
            margin-right: 10px;
        }
        
        .action-btn:hover {
            transform: scale(1.2);
        }
        
        .delete-btn {
            color: #e74c3c;
        }
        
        .form-control {
            border-radius: 50px;
            padding: 12px 20px;
            border: 1px solid #ddd;
            margin-bottom: 20px;
        }
        
        .form-control:focus {
            box-shadow: 0 0 0 3px rgba(108, 92, 231, 0.2);
            border-color: var(--primary-color);
        }
        
        .form-label {
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .modal-content {
            border-radius: 15px;
            border: none;
        }
        
        .modal-header {
            border-bottom: none;
            padding: 20px 30px;
        }
        
        .modal-title {
            font-weight: 700;
            color: var(--primary-color);
        }
        
        .modal-body {
            padding: 20px 30px;
        }
        
        .modal-footer {
            border-top: none;
            padding: 20px 30px;
        }
        
        .badge {
            padding: 8px 15px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 0.8rem;
        }
        
        .badge-success {
            background-color: #2ecc71;
            color: white;
        }
        
        .badge-warning {
            background-color: #f39c12;
            color: white;
        }
        
        .badge-danger {
            background-color: #e74c3c;
            color: white;
        }
        
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .toggle-slider {
            background-color: var(--accent-color);
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }
        
        footer {
            background-color: var(--dark-color);
            color: white;
            padding: 40px 0;
            margin-top: 50px;
        }
        
        .footer-links a {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            transition: all 0.3s ease;
        }
        
        .footer-links a:hover {
            color: white;
            text-decoration: underline;
        }
        
        .social-icons a {
            color: white;
            font-size: 1.5rem;
            margin-right: 15px;
            transition: all 0.3s ease;
        }
        
        .social-icons a:hover {
            color: var(--accent-color);
            transform: translateY(-3px);
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark sticky-top">
        <div class="container">
            <a class="navbar-brand" href="index.html">OTT Marketplace</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="catalog.html">Catalog</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="admin.html">Admin Panel</a>
                    </li>
                    <li class="nav-item" id="logout-nav">
                        <a class="nav-link" href="#" id="logout-btn">Logout</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Admin Content -->
    <div class="container my-5">
        <!-- Admin Header -->
        <div class="admin-header">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h2 class="admin-title">Admin Panel</h2>
                    <p class="mb-0 text-muted">Manage your products, orders, and credentials</p>
                </div>
                <div class="col-md-4 text-md-end mt-3 mt-md-0">
                    <button class="btn btn-primary" id="add-product-btn" data-bs-toggle="modal" data-bs-target="#addProductModal">
                        <i class="fas fa-plus me-2"></i> Add New Product
                    </button>
                </div>
            </div>
        </div>

        <!-- Admin Tabs -->
        <ul class="nav nav-pills mb-4" id="adminTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="products-tab" data-bs-toggle="tab" data-bs-target="#products" type="button" role="tab" aria-controls="products" aria-selected="true">Products</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="orders-tab" data-bs-toggle="tab" data-bs-target="#orders" type="button" role="tab" aria-controls="orders" aria-selected="false">Orders</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="credentials-tab" data-bs-toggle="tab" data-bs-target="#credentials" type="button" role="tab" aria-controls="credentials" aria-selected="false">Credentials</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="users-tab" data-bs-toggle="tab" data-bs-target="#users" type="button" role="tab" aria-controls="users" aria-selected="false">Users</button>
            </li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content" id="adminTabsContent">
            <!-- Products Tab -->
            <div class="tab-pane fade show active" id="products" role="tabpanel" aria-labelledby="products-tab">
                <div class="card">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Name</th>
                                        <th>Category</th>
                                        <th>Price</th>
                                        <th>Duration</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="products-table-body">
                                    <!-- Products will be loaded dynamically -->
                                    <tr>
                                        <td colspan="7" class="text-center">Loading products...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Orders Tab -->
            <div class="tab-pane fade" id="orders" role="tabpanel" aria-labelledby="orders-tab">
                <div class="card">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Order #</th>
                                        <th>Customer</th>
                                        <th>Date</th>
                                        <th>Amount</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="orders-table-body">
                                    <!-- Orders will be loaded dynamically -->
                                    <tr>
                                        <td colspan="6" class="text-center">Loading orders...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Credentials Tab -->
            <div class="tab-pane fade" id="credentials" role="tabpanel" aria-labelledby="credentials-tab">
                <div class="card">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Order #</th>
                                        <th>Product</th>
                                        <th>Customer</th>
                                        <th>Username</th>
                                        <th>Password</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="credentials-table-body">
                                    <!-- Credentials will be loaded dynamically -->
                                    <tr>
                                        <td colspan="6" class="text-center">Loading credentials...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Users Tab -->
            <div class="tab-pane fade" id="users" role="tabpanel" aria-labelledby="users-tab">
                <div class="card">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Username</th>
                                        <th>Email</th>
                                        <th>Joined</th>
                                        <th>Orders</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="users-table-body">
                                    <!-- Users will be loaded dynamically -->
                                    <tr>
                                        <td colspan="6" class="text-center">Loading users...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Product Modal -->
    <div class="modal fade" id="addProductModal" tabindex="-1" aria-labelledby="addProductModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addProductModalLabel">Add New Product</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="add-product-form">
                        <div class="mb-3">
                            <label for="product-name" class="form-label">Product Name</label>
                            <input type="text" class="form-control" id="product-name" required>
                        </div>
                        <div class="mb-3">
                            <label for="product-description" class="form-label">Description</label>
                            <textarea class="form-control" id="product-description" rows="3"></textarea>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="product-category" class="form-label">Category</label>
                                <select class="form-control" id="product-category" required>
                                    <option value="">Select Category</option>
                                    <option value="Amazon Prime">Amazon Prime</option>
                                    <option value="Netflix">Netflix</option>
                                    <option value="Disney+ Hotstar">Disney+ Hotstar</option>
                                    <option value="SonyLIV">SonyLIV</option>
                                    <option value="ZEE5">ZEE5</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="product-duration" class="form-label">Duration (months)</label>
                                <input type="number" class="form-control" id="product-duration" min="1" required>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="product-price" class="form-label">Price (₹)</label>
                                <input type="number" class="form-control" id="product-price" min="0" step="0.01" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="product-status" class="form-label">Status</label>
                                <div class="form-check form-switch mt-2">
                                    <input class="form-check-input" type="checkbox" id="product-active" checked>
                                    <label class="form-check-label" for="product-active">Active</label>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="product-image" class="form-label">Image URL</label>
                            <input type="url" class="form-control" id="product-image">
                            <small class="text-muted">Enter a URL for the product image</small>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="save-product-btn">Save Product</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Product Modal -->
    <div class="modal fade" id="editProductModal" tabindex="-1" aria-labelledby="editProductModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editProductModalLabel">Edit Product</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="edit-product-form">
                        <input type="hidden" id="edit-product-id">
                        <div class="mb-3">
                            <label for="edit-product-name" class="form-label">Product Name</label>
                            <input type="text" class="form-control" id="edit-product-name" required>
                        </div>
                        <div class="mb-3">
                            <label for="edit-product-description" class="form-label">Description</label>
                            <textarea class="form-control" id="edit-product-description" rows="3"></textarea>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="edit-product-category" class="form-label">Category</label>
                                <select class="form-control" id="edit-product-category" required>
                                    <option value="">Select Category</option>
                                    <option value="Amazon Prime">Amazon Prime</option>
                                    <option value="Netflix">Netflix</option>
                                    <option value="Disney+ Hotstar">Disney+ Hotstar</option>
                                    <option value="SonyLIV">SonyLIV</option>
                                    <option value="ZEE5">ZEE5</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="edit-product-duration" class="form-label">Duration (months)</label>
                                <input type="number" class="form-control" id="edit-product-duration" min="1" required>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="edit-product-price" class="form-label">Price (₹)</label>
                                <input type="number" class="form-control" id="edit-product-price" min="0" step="0.01" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="edit-product-status" class="form-label">Status</label>
                                <div class="form-check form-switch mt-2">
                                    <input class="form-check-input" type="checkbox" id="edit-product-active">
                                    <label class="form-check-label" for="edit-product-active">Active</label>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="edit-product-image" class="form-label">Image URL</label>
                            <input type="url" class="form-control" id="edit-product-image">
                            <small class="text-muted">Enter a URL for the product image</small>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="update-product-btn">Update Product</button>
                </div>
            </div>
        </div>
    </div>

    <!-- View Order Modal -->
    <div class="modal fade" id="viewOrderModal" tabindex="-1" aria-labelledby="viewOrderModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="viewOrderModalLabel">Order Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="order-details-container">
                        <!-- Order details will be loaded dynamically -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-success" id="approve-payment-btn">Approve Payment</button>
                    <button type="button" class="btn btn-danger" id="reject-payment-btn">Reject Payment</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Credentials Modal -->
    <div class="modal fade" id="editCredentialsModal" tabindex="-1" aria-labelledby="editCredentialsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editCredentialsModalLabel">Edit Credentials</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="edit-credentials-form">
                        <input type="hidden" id="edit-credential-id">
                        <input type="hidden" id="edit-credential-order-id">
                        <div class="mb-3">
                            <label for="edit-credential-username" class="form-label">Username</label>
                            <input type="text" class="form-control" id="edit-credential-username" required>
                        </div>
                        <div class="mb-3">
                            <label for="edit-credential-password" class="form-label">Password</label>
                            <input type="text" class="form-control" id="edit-credential-password" required>
                        </div>
                        <div class="mb-3">
                            <label for="edit-credential-notes" class="form-label">Additional Notes</label>
                            <textarea class="form-control" id="edit-credential-notes" rows="3"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="update-credentials-btn">Update Credentials</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-4">
                    <h5>OTT Marketplace</h5>
                    <p>Your one-stop destination for all premium OTT subscriptions at the best prices.</p>
                </div>
                <div class="col-md-4 mb-4">
                    <h5>Quick Links</h5>
                    <ul class="list-unstyled footer-links">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="catalog.html">Catalog</a></li>
                        <li><a href="admin.html">Admin Panel</a></li>
                    </ul>
                </div>
                <div class="col-md-4 mb-4">
                    <h5>Connect With Us</h5>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
            </div>
            <hr class="mt-4 mb-3">
            <div class="text-center">
                <p class="mb-0">&copy; 2025 OTT Marketplace. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Sample data (in a real app, this would come from the API)
        const sampleProducts = [
            {
                id: 1,
                name: 'Amazon Prime 1 Month',
                description: 'Access to Amazon Prime Video, Prime Music, and free shipping for 1 month',
                price: 179,
                duration_months: 1,
                category: 'Amazon Prime',
                active: true,
                image: 'https://m.media-amazon.com/images/G/01/primevideo/seo/primevideo-seo-logo.png'
            },
            {
                id: 2,
                name: 'Amazon Prime 3 Months',
                description: 'Access to Amazon Prime Video, Prime Music, and free shipping for 3 months',
                price: 459,
                duration_months: 3,
                category: 'Amazon Prime',
                active: true,
                image: 'https://m.media-amazon.com/images/G/01/primevideo/seo/primevideo-seo-logo.png'
            },
            {
                id: 3,
                name: 'Amazon Prime 6 Months',
                description: 'Access to Amazon Prime Video, Prime Music, and free shipping for 6 months',
                price: 849,
                duration_months: 6,
                category: 'Amazon Prime',
                active: true,
                image: 'https://m.media-amazon.com/images/G/01/primevideo/seo/primevideo-seo-logo.png'
            },
            {
                id: 4,
                name: 'Amazon Prime 1 Year',
                description: 'Access to Amazon Prime Video, Prime Music, and free shipping for 1 year',
                price: 1499,
                duration_months: 12,
                category: 'Amazon Prime',
                active: true,
                image: 'https://m.media-amazon.com/images/G/01/primevideo/seo/primevideo-seo-logo.png'
            },
            {
                id: 5,
                name: 'Netflix 1 Month',
                description: 'Access to Netflix Standard plan with HD streaming for 1 month',
                price: 499,
                duration_months: 1,
                category: 'Netflix',
                active: true,
                image: 'https://assets.nflxext.com/ffe/siteui/vlv3/c31c3123-3df7-4359-8b8c-475bd2d9925d/15feb590-3d73-45e9-9e4a-2eb334c83921/IN-en-20231225-popsignuptwoweeks-perspective_alpha_website_large.jpg'
            },
            {
                id: 6,
                name: 'Netflix 3 Months',
                description: 'Access to Netflix Standard plan with HD streaming for 3 months',
                price: 1399,
                duration_months: 3,
                category: 'Netflix',
                active: false,
                image: 'https://assets.nflxext.com/ffe/siteui/vlv3/c31c3123-3df7-4359-8b8c-475bd2d9925d/15feb590-3d73-45e9-9e4a-2eb334c83921/IN-en-20231225-popsignuptwoweeks-perspective_alpha_website_large.jpg'
            }
        ];
        
        const sampleOrders = [
            {
                id: 1001,
                order_number: 'ORD-12345678',
                user_id: 1,
                user_email: 'john@example.com',
                user_name: 'John Doe',
                total_amount: 1399,
                payment_status: 'completed',
                payment_screenshot: '/static/uploads/sample_screenshot.png',
                created_at: '2025-04-15T00:00:00Z',
                items: [
                    {
                        id: 1,
                        product_id: 6,
                        name: 'Netflix 3 Months',
                        price: 1399,
                        status: 'active'
                    }
                ]
            },
            {
                id: 1002,
                order_number: 'ORD-87654321',
                user_id: 2,
                user_email: 'jane@example.com',
                user_name: 'Jane Smith',
                total_amount: 849,
                payment_status: 'pending_verification',
                payment_screenshot: '/static/uploads/sample_screenshot2.png',
                created_at: '2025-05-10T00:00:00Z',
                items: [
                    {
                        id: 2,
                        product_id: 3,
                        name: 'Amazon Prime 6 Months',
                        price: 849,
                        status: 'pending'
                    }
                ]
            },
            {
                id: 1003,
                order_number: 'ORD-ABCDEF12',
                user_id: 3,
                user_email: 'mike@example.com',
                user_name: 'Mike Johnson',
                total_amount: 299,
                payment_status: 'failed',
                payment_screenshot: '/static/uploads/sample_screenshot3.png',
                created_at: '2025-05-18T00:00:00Z',
                items: [
                    {
                        id: 3,
                        product_id: 9,
                        name: 'Disney+ Hotstar 1 Month',
                        price: 299,
                        status: 'failed'
                    }
                ]
            }
        ];
        
        const sampleCredentials = [
            {
                id: 1,
                order_id: 1001,
                product_name: 'Netflix 3 Months',
                user_name: 'John Doe',
                user_email: 'john@example.com',
                username: 'netflix_user123',
                password: 'netflix_pass456',
                other_info: 'Use this account on Netflix.com',
                created_at: '2025-04-15T00:00:00Z',
                updated_at: '2025-04-15T00:00:00Z'
            },
            {
                id: 2,
                order_id: 1002,
                product_name: 'Amazon Prime 6 Months',
                user_name: 'Jane Smith',
                user_email: 'jane@example.com',
                username: 'prime_user789',
                password: 'prime_pass123',
                other_info: 'Use this account on Amazon Prime Video',
                created_at: '2025-03-10T00:00:00Z',
                updated_at: '2025-03-10T00:00:00Z'
            }
        ];
        
        const sampleUsers = [
            {
                id: 1,
                username: 'johndoe',
                email: 'john@example.com',
                created_at: '2025-01-15T00:00:00Z',
                orders_count: 3
            },
            {
                id: 2,
                username: 'janesmith',
                email: 'jane@example.com',
                created_at: '2025-02-20T00:00:00Z',
                orders_count: 1
            },
            {
                id: 3,
                username: 'mikejohnson',
                email: 'mike@example.com',
                created_at: '2025-03-05T00:00:00Z',
                orders_count: 2
            }
        ];
        
        // Format date
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return new Date(dateString).toLocaleDateString(undefined, options);
        }
        
        // Load products
        function loadProducts() {
            const tableBody = document.getElementById('products-table-body');
            
            if (sampleProducts.length === 0) {
                tableBody.innerHTML = '<tr><td colspan="7" class="text-center">No products found.</td></tr>';
                return;
            }
            
            let html = '';
            
            sampleProducts.forEach(product => {
                const statusBadge = product.active ? 
                    '<span class="badge bg-success">Active</span>' : 
                    '<span class="badge bg-danger">Sold Out</span>';
                
                html += `
                    <tr>
                        <td>${product.id}</td>
                        <td>${product.name}</td>
                        <td>${product.category}</td>
                        <td>₹${product.price}</td>
                        <td>${product.duration_months} month${product.duration_months > 1 ? 's' : ''}</td>
                        <td>${statusBadge}</td>
                        <td>
                            <i class="fas fa-edit action-btn edit-product-btn" data-product-id="${product.id}" title="Edit"></i>
                            <i class="fas fa-trash-alt action-btn delete-btn delete-product-btn" data-product-id="${product.id}" title="Delete"></i>
                        </td>
                    </tr>
                `;
            });
            
            tableBody.innerHTML = html;
            
            // Add event listeners to action buttons
            document.querySelectorAll('.edit-product-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const productId = parseInt(this.getAttribute('data-product-id'));
                    openEditProductModal(productId);
                });
            });
            
            document.querySelectorAll('.delete-product-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const productId = parseInt(this.getAttribute('data-product-id'));
                    if (confirm('Are you sure you want to delete this product?')) {
                        deleteProduct(productId);
                    }
                });
            });
        }
        
        // Load orders
        function loadOrders() {
            const tableBody = document.getElementById('orders-table-body');
            
            if (sampleOrders.length === 0) {
                tableBody.innerHTML = '<tr><td colspan="6" class="text-center">No orders found.</td></tr>';
                return;
            }
            
            let html = '';
            
            sampleOrders.forEach(order => {
                let statusBadge;
                
                switch (order.payment_status) {
                    case 'completed':
                        statusBadge = '<span class="badge bg-success">Completed</span>';
                        break;
                    case 'pending_verification':
                        statusBadge = '<span class="badge bg-warning">Pending Verification</span>';
                        break;
                    case 'failed':
                        statusBadge = '<span class="badge bg-danger">Failed</span>';
                        break;
                    default:
                        statusBadge = '<span class="badge bg-secondary">Pending</span>';
                }
                
                html += `
                    <tr>
                        <td>${order.order_number}</td>
                        <td>${order.user_name}</td>
                        <td>${formatDate(order.created_at)}</td>
                        <td>₹${order.total_amount}</td>
                        <td>${statusBadge}</td>
                        <td>
                            <i class="fas fa-eye action-btn view-order-btn" data-order-id="${order.id}" title="View"></i>
                        </td>
                    </tr>
                `;
            });
            
            tableBody.innerHTML = html;
            
            // Add event listeners to action buttons
            document.querySelectorAll('.view-order-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const orderId = parseInt(this.getAttribute('data-order-id'));
                    openViewOrderModal(orderId);
                });
            });
        }
        
        // Load credentials
        function loadCredentials() {
            const tableBody = document.getElementById('credentials-table-body');
            
            if (sampleCredentials.length === 0) {
                tableBody.innerHTML = '<tr><td colspan="6" class="text-center">No credentials found.</td></tr>';
                return;
            }
            
            let html = '';
            
            sampleCredentials.forEach(credential => {
                html += `
                    <tr>
                        <td>${credential.order_id}</td>
                        <td>${credential.product_name}</td>
                        <td>${credential.user_name}</td>
                        <td>${credential.username}</td>
                        <td>${credential.password}</td>
                        <td>
                            <i class="fas fa-edit action-btn edit-credential-btn" data-credential-id="${credential.id}" data-order-id="${credential.order_id}" title="Edit"></i>
                        </td>
                    </tr>
                `;
            });
            
            tableBody.innerHTML = html;
            
            // Add event listeners to action buttons
            document.querySelectorAll('.edit-credential-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const credentialId = parseInt(this.getAttribute('data-credential-id'));
                    const orderId = parseInt(this.getAttribute('data-order-id'));
                    openEditCredentialsModal(credentialId, orderId);
                });
            });
        }
        
        // Load users
        function loadUsers() {
            const tableBody = document.getElementById('users-table-body');
            
            if (sampleUsers.length === 0) {
                tableBody.innerHTML = '<tr><td colspan="6" class="text-center">No users found.</td></tr>';
                return;
            }
            
            let html = '';
            
            sampleUsers.forEach(user => {
                html += `
                    <tr>
                        <td>${user.id}</td>
                        <td>${user.username}</td>
                        <td>${user.email}</td>
                        <td>${formatDate(user.created_at)}</td>
                        <td>${user.orders_count}</td>
                        <td>
                            <i class="fas fa-envelope action-btn" title="Email"></i>
                            <i class="fas fa-ban action-btn delete-btn" title="Block"></i>
                        </td>
                    </tr>
                `;
            });
            
            tableBody.innerHTML = html;
        }
        
        // Open edit product modal
        function openEditProductModal(productId) {
            const product = sampleProducts.find(p => p.id === productId);
            
            if (!product) {
                alert('Product not found.');
                return;
            }
            
            document.getElementById('edit-product-id').value = product.id;
            document.getElementById('edit-product-name').value = product.name;
            document.getElementById('edit-product-description').value = product.description;
            document.getElementById('edit-product-category').value = product.category;
            document.getElementById('edit-product-duration').value = product.duration_months;
            document.getElementById('edit-product-price').value = product.price;
            document.getElementById('edit-product-active').checked = product.active;
            document.getElementById('edit-product-image').value = product.image;
            
            const editProductModal = new bootstrap.Modal(document.getElementById('editProductModal'));
            editProductModal.show();
        }
        
        // Open view order modal
        function openViewOrderModal(orderId) {
            const order = sampleOrders.find(o => o.id === orderId);
            
            if (!order) {
                alert('Order not found.');
                return;
            }
            
            const container = document.getElementById('order-details-container');
            
            let statusBadge;
            switch (order.payment_status) {
                case 'completed':
                    statusBadge = '<span class="badge bg-success">Completed</span>';
                    break;
                case 'pending_verification':
                    statusBadge = '<span class="badge bg-warning">Pending Verification</span>';
                    break;
                case 'failed':
                    statusBadge = '<span class="badge bg-danger">Failed</span>';
                    break;
                default:
                    statusBadge = '<span class="badge bg-secondary">Pending</span>';
            }
            
            let html = `
                <div class="row mb-4">
                    <div class="col-md-6">
                        <h6>Order Information</h6>
                        <p><strong>Order Number:</strong> ${order.order_number}</p>
                        <p><strong>Date:</strong> ${formatDate(order.created_at)}</p>
                        <p><strong>Status:</strong> ${statusBadge}</p>
                        <p><strong>Total Amount:</strong> ₹${order.total_amount}</p>
                    </div>
                    <div class="col-md-6">
                        <h6>Customer Information</h6>
                        <p><strong>Name:</strong> ${order.user_name}</p>
                        <p><strong>Email:</strong> ${order.user_email}</p>
                    </div>
                </div>
                
                <h6>Order Items</h6>
                <div class="table-responsive mb-4">
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>Product</th>
                                <th>Price</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
            `;
            
            order.items.forEach(item => {
                let itemStatusBadge;
                switch (item.status) {
                    case 'active':
                        itemStatusBadge = '<span class="badge bg-success">Active</span>';
                        break;
                    case 'expired':
                        itemStatusBadge = '<span class="badge bg-danger">Expired</span>';
                        break;
                    default:
                        itemStatusBadge = '<span class="badge bg-warning">Pending</span>';
                }
                
                html += `
                    <tr>
                        <td>${item.name}</td>
                        <td>₹${item.price}</td>
                        <td>${itemStatusBadge}</td>
                    </tr>
                `;
            });
            
            html += `
                        </tbody>
                    </table>
                </div>
            `;
            
            if (order.payment_screenshot) {
                html += `
                    <h6>Payment Screenshot</h6>
                    <div class="text-center mb-4">
                        <img src="${order.payment_screenshot}" alt="Payment Screenshot" class="img-fluid" style="max-height: 300px;">
                    </div>
                `;
            }
            
            container.innerHTML = html;
            
            // Show/hide approval buttons based on status
            const approveBtn = document.getElementById('approve-payment-btn');
            const rejectBtn = document.getElementById('reject-payment-btn');
            
            if (order.payment_status === 'pending_verification') {
                approveBtn.style.display = 'block';
                rejectBtn.style.display = 'block';
                
                // Add event listeners
                approveBtn.onclick = function() {
                    approvePayment(order.id);
                };
                
                rejectBtn.onclick = function() {
                    rejectPayment(order.id);
                };
            } else {
                approveBtn.style.display = 'none';
                rejectBtn.style.display = 'none';
            }
            
            const viewOrderModal = new bootstrap.Modal(document.getElementById('viewOrderModal'));
            viewOrderModal.show();
        }
        
        // Open edit credentials modal
        function openEditCredentialsModal(credentialId, orderId) {
            const credential = sampleCredentials.find(c => c.id === credentialId);
            
            if (!credential) {
                alert('Credential not found.');
                return;
            }
            
            document.getElementById('edit-credential-id').value = credential.id;
            document.getElementById('edit-credential-order-id').value = orderId;
            document.getElementById('edit-credential-username').value = credential.username;
            document.getElementById('edit-credential-password').value = credential.password;
            document.getElementById('edit-credential-notes').value = credential.other_info;
            
            const editCredentialsModal = new bootstrap.Modal(document.getElementById('editCredentialsModal'));
            editCredentialsModal.show();
        }
        
        // Add product
        function addProduct() {
            const name = document.getElementById('product-name').value;
            const description = document.getElementById('product-description').value;
            const category = document.getElementById('product-category').value;
            const duration = parseInt(document.getElementById('product-duration').value);
            const price = parseFloat(document.getElementById('product-price').value);
            const active = document.getElementById('product-active').checked;
            const image = document.getElementById('product-image').value;
            
            if (!name || !category || !duration || isNaN(price)) {
                alert('Please fill in all required fields.');
                return;
            }
            
            // In a real app, this would be an API call
            const newProduct = {
                id: sampleProducts.length > 0 ? Math.max(...sampleProducts.map(p => p.id)) + 1 : 1,
                name,
                description,
                category,
                duration_months: duration,
                price,
                active,
                image: image || 'https://via.placeholder.com/300x200?text=No+Image'
            };
            
            sampleProducts.push(newProduct);
            
            // Close modal
            const modal = bootstrap.Modal.getInstance(document.getElementById('addProductModal'));
            modal.hide();
            
            // Reset form
            document.getElementById('add-product-form').reset();
            
            // Reload products
            loadProducts();
            
            // Show success message
            alert('Product added successfully!');
        }
        
        // Update product
        function updateProduct() {
            const id = parseInt(document.getElementById('edit-product-id').value);
            const name = document.getElementById('edit-product-name').value;
            const description = document.getElementById('edit-product-description').value;
            const category = document.getElementById('edit-product-category').value;
            const duration = parseInt(document.getElementById('edit-product-duration').value);
            const price = parseFloat(document.getElementById('edit-product-price').value);
            const active = document.getElementById('edit-product-active').checked;
            const image = document.getElementById('edit-product-image').value;
            
            if (!name || !category || !duration || isNaN(price)) {
                alert('Please fill in all required fields.');
                return;
            }
            
            // In a real app, this would be an API call
            const productIndex = sampleProducts.findIndex(p => p.id === id);
            
            if (productIndex === -1) {
                alert('Product not found.');
                return;
            }
            
            sampleProducts[productIndex] = {
                ...sampleProducts[productIndex],
                name,
                description,
                category,
                duration_months: duration,
                price,
                active,
                image: image || sampleProducts[productIndex].image
            };
            
            // Close modal
            const modal = bootstrap.Modal.getInstance(document.getElementById('editProductModal'));
            modal.hide();
            
            // Reload products
            loadProducts();
            
            // Show success message
            alert('Product updated successfully!');
        }
        
        // Delete product
        function deleteProduct(productId) {
            // In a real app, this would be an API call
            const productIndex = sampleProducts.findIndex(p => p.id === productId);
            
            if (productIndex === -1) {
                alert('Product not found.');
                return;
            }
            
            sampleProducts.splice(productIndex, 1);
            
            // Reload products
            loadProducts();
            
            // Show success message
            alert('Product deleted successfully!');
        }
        
        // Approve payment
        function approvePayment(orderId) {
            // In a real app, this would be an API call
            const orderIndex = sampleOrders.findIndex(o => o.id === orderId);
            
            if (orderIndex === -1) {
                alert('Order not found.');
                return;
            }
            
            sampleOrders[orderIndex].payment_status = 'completed';
            sampleOrders[orderIndex].items.forEach(item => {
                item.status = 'active';
            });
            
            // Close modal
            const modal = bootstrap.Modal.getInstance(document.getElementById('viewOrderModal'));
            modal.hide();
            
            // Reload orders
            loadOrders();
            
            // Show success message
            alert('Payment approved successfully!');
        }
        
        // Reject payment
        function rejectPayment(orderId) {
            // In a real app, this would be an API call
            const orderIndex = sampleOrders.findIndex(o => o.id === orderId);
            
            if (orderIndex === -1) {
                alert('Order not found.');
                return;
            }
            
            sampleOrders[orderIndex].payment_status = 'failed';
            sampleOrders[orderIndex].items.forEach(item => {
                item.status = 'failed';
            });
            
            // Close modal
            const modal = bootstrap.Modal.getInstance(document.getElementById('viewOrderModal'));
            modal.hide();
            
            // Reload orders
            loadOrders();
            
            // Show success message
            alert('Payment rejected!');
        }
        
        // Update credentials
        function updateCredentials() {
            const id = parseInt(document.getElementById('edit-credential-id').value);
            const orderId = parseInt(document.getElementById('edit-credential-order-id').value);
            const username = document.getElementById('edit-credential-username').value;
            const password = document.getElementById('edit-credential-password').value;
            const notes = document.getElementById('edit-credential-notes').value;
            
            if (!username || !password) {
                alert('Please fill in all required fields.');
                return;
            }
            
            // In a real app, this would be an API call
            const credentialIndex = sampleCredentials.findIndex(c => c.id === id);
            
            if (credentialIndex === -1) {
                alert('Credential not found.');
                return;
            }
            
            sampleCredentials[credentialIndex] = {
                ...sampleCredentials[credentialIndex],
                username,
                password,
                other_info: notes,
                updated_at: new Date().toISOString()
            };
            
            // Close modal
            const modal = bootstrap.Modal.getInstance(document.getElementById('editCredentialsModal'));
            modal.hide();
            
            // Reload credentials
            loadCredentials();
            
            // Show success message
            alert('Credentials updated successfully!');
        }
        
        // Check login status
        document.addEventListener('DOMContentLoaded', function() {
            const token = localStorage.getItem('token');
            
            if (!token) {
                // Redirect to login page if not logged in
                window.location.href = 'login.html';
                return;
            }
            
            // Load data
            loadProducts();
            loadOrders();
            loadCredentials();
            loadUsers();
            
            // Add event listeners
            document.getElementById('save-product-btn').addEventListener('click', addProduct);
            document.getElementById('update-product-btn').addEventListener('click', updateProduct);
            document.getElementById('update-credentials-btn').addEventListener('click', updateCredentials);
            
            // Logout functionality
            document.getElementById('logout-btn').addEventListener('click', function(e) {
                e.preventDefault();
                localStorage.removeItem('token');
                localStorage.removeItem('user');
                window.location.href = 'index.html';
            });
        });
    </script>
</body>
</html>
